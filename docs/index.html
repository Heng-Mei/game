<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>小游戏大厅</title>
    <link rel="icon" type="image/svg+xml" href="./assets/icons/favicon.svg" />
    <link rel="stylesheet" href="./styles/main.css" />
  </head>
  <body>
    <main class="app-shell">
      <section id="menuView" class="menu-view">
        <header class="menu-header">
          <h1>小游戏大厅</h1>
          <p>选择一个游戏开始，随时可返回菜单。</p>
        </header>

        <div class="menu-grid">
          <button class="menu-btn" data-game="tetris" type="button">
            <strong>俄罗斯方块</strong>
            <span>消行、升级、下一个方块预览</span>
          </button>
          <button class="menu-btn" data-game="snake" type="button">
            <strong>贪吃蛇</strong>
            <span>吃食物变长，别撞墙和自己</span>
          </button>
          <button class="menu-btn" data-game="minesweeper" type="button">
            <strong>扫雷</strong>
            <span>左键翻开，右键插旗</span>
          </button>
          <button class="menu-btn" data-game="dino" type="button">
            <strong>小恐龙跳障碍</strong>
            <span>空格起跳，躲避障碍物</span>
          </button>
          <button class="menu-btn" data-game="flappy" type="button">
            <strong>Flappy Bird</strong>
            <span>点击或空格让小鸟飞起</span>
          </button>
        </div>
      </section>

      <section id="gameView" class="game-view hidden">
        <div class="topbar">
          <button id="backToMenu" class="back-btn" type="button">返回菜单</button>
          <h2 id="gameTitle">游戏</h2>
          <button id="infoToggleBtn" class="back-btn info-toggle-btn hidden" type="button" aria-expanded="false">信息</button>
        </div>

        <div class="layout">
          <section class="panel">
            <canvas id="mainCanvas" width="480" height="600" aria-label="游戏主画布"></canvas>
            <p id="stateText" class="state">准备开始</p>
          </section>

          <aside id="sidePanel" class="side">
            <div class="card">
              <h3>状态</h3>
              <div id="statusList" class="status-list"></div>
            </div>

            <div id="nextCard" class="card hidden">
              <h3>下一个</h3>
              <canvas id="nextCanvas" width="120" height="120" aria-label="下一个方块预览"></canvas>
            </div>

            <div id="settingsCard" class="card hidden">
              <h3>视觉设置</h3>
              <div id="settingsContainer" class="settings"></div>
            </div>

            <div class="card">
              <h3>操作</h3>
              <div id="controlsList" class="controls-list"></div>
            </div>
          </aside>
        </div>

        <section id="mobileControls" class="mobile-controls hidden" aria-label="移动端操作"></section>

        <section id="infoDrawer" class="info-drawer hidden" aria-label="移动端信息抽屉">
          <div id="infoDrawerContent" class="info-drawer-content"></div>
        </section>

        <div id="orientationOverlay" class="orientation-overlay hidden" role="status" aria-live="polite">
          <div class="orientation-card">
            <h3>建议横屏游玩</h3>
            <p id="orientationMessage">横屏可以获得更完整的操作区域和更稳定的触控体验。</p>
            <button id="continuePortraitBtn" type="button" class="back-btn">继续竖屏游玩</button>
          </div>
        </div>
      </section>
    </main>

    <script src="./scripts/core/ui.js"></script>
    <script src="./scripts/core/game-manager.js"></script>
    <script src="./scripts/core/loop.js"></script>
    <script src="./scripts/games/tetris.js"></script>
    <script src="./scripts/games/snake.js"></script>
    <script src="./scripts/games/minesweeper.js"></script>
    <script src="./scripts/games/dino.js"></script>
    <script src="./scripts/games/flappy.js"></script>
    <script src="./scripts/app.js"></script>
  </body>
</html>
